@use 'variables'as *;

$edge: .09rem;

// ==========================================================================
// GRAPHIC EQ BLOCK
// ==========================================================================
.graphic-eq {
  display: flex;
  flex-direction: row;
  position: relative;
  height: calc($rack-unit * 2);
  width: $rack-width;
  border-radius: .2rem;
  background: linear-gradient(145deg,
      #2a5973,
      /* lighter blue top-left */
      #1d3f54
      /* darker blue bottom-right */
    );
  background-blend-mode: multiply;
  box-shadow:
    inset 0.125rem 0.125rem 0.375rem rgba(255, 255, 255, 0.08),
    /* soft highlight */
    inset -0.125rem -0.125rem 0.375rem rgba(0, 0, 0, .6),
    /* subtle left/right inset to make the panel sit into the rack */
    /* subtler left/right inset â€” smaller, softer and lower opacity */
    inset 0.25rem 0 0.5rem rgba(0, 0, 0, 0.22),
    inset -0.25rem 0 0.5rem rgba(0, 0, 0, 0.22);
  /* subtle depth */
  border-radius: 0.4rem;
  /* optional, adjust as needed */
  border-top: var($edge) solid rgba(150, 150, 150, .15);
  border-bottom: var($edge) solid rgba(0, 0, 0, .6);

  // ==========================================================================
  // GRAPHIC EQ ELEMENTS
  // ==========================================================================

  // Rack ears
  &__rack-ear {
    width: 2.6rem;
    height: calc($rack-unit * 2);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: calc(0.25rem - $screw-radius);
    position: relative;

    &--left {
      align-items: flex-start;
      padding-left: calc($rail-centerline - $screw-radius);
    }

    &--right {
      align-items: flex-end;
      padding-right: calc($rail-centerline - $screw-radius);
    }

    &__label {
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.5rem;
      margin-left: 0.67rem;
      text-align: center;
      transform: translateX(-50%) rotate(-90deg);
      transform-origin: center center;
      width: 7rem;
    }

    &__logo {
      height: auto;
      opacity: 0.70;
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      width: 2rem;
    }
  }



  // Main chassis
  &__chassis {
    flex: 1 1 auto;
    display: flex;
    gap: .6rem;
    height: 100%;
  }

  // Master controls section
  &__master-controls {
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 0.3rem;
    padding-right: 1rem;
    margin-right: 0.3rem;
    position: relative;
    font-family: Arial, Helvetica, sans-serif;

    &::after {
      content: '';
      position: absolute;
      right: -0.03125rem;
      top: 0.5rem;
      bottom: 0.5rem;
      width: 0.0625rem;
      background: rgba(255, 255, 255, 0.3);
    }
  }

  // Button container
  &__buttons {
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
  }

  // EQ section
  &__eq-section {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
  }
}



// ==========================================================================
// CONTROL BUTTON BLOCK
// ==========================================================================
.control-button {
  display: flex;
  align-items: center;
  flex-direction: row;
  justify-content: flex-start;
  gap: .4rem;
  padding: .3rem .6rem;
  background: linear-gradient(180deg, #3a3a3a, #1a1a1a);
  border: .06rem solid rgba(0, 0, 0, 0.6);
  border-radius: .2rem;
  color: #c8c8c8;
  font-size: .4rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.1s ease;
  box-shadow: inset 0 .06rem .12rem rgba(255, 255, 255, 0.1), inset 0 -.06rem .12rem rgba(0, 0, 0, 0.4), 0 .04rem .08rem rgba(0, 0, 0, 0.4);

  &:active,
  &--active {
    background: linear-gradient(180deg, #2a2a2a, #0a0a0a);
    box-shadow: inset 0 .04rem .08rem rgba(0, 0, 0, 0.6), inset 0 -.02rem .04rem rgba(255, 255, 255, 0.05), 0 .02rem .04rem rgba(0, 0, 0, 0.3);
    transform: scale(.99);
  }

  // Button type modifiers can be added as needed:
  // &--bypass, &--invert, &--mute

  &__led {
    width: .4rem;
    height: .4rem;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #4a0000, #2a0000);
    box-shadow: inset 0 0 .08rem rgba(0, 0, 0, 0.6), 0 .02rem .04rem rgba(0, 0, 0, 0.4);
    transition: all 0.2s ease;
  }

  // &__label styling can be added if needed
}

// Specific LED colors for each button type
.control-button--bypass.control-button--active .control-button__led {
  background: radial-gradient(circle at 30% 30%, rgb(243, 141, 177), rgb(223, 121, 157), rgb(203, 101, 137));
  box-shadow: inset 0 0 .08rem rgba(255, 255, 255, 0.3), 0 0 .3rem rgba(243, 141, 177, 0.6), 0 0 .6rem rgba(243, 141, 177, 0.3);
}

.control-button--invert.control-button--active .control-button__led {
  background: radial-gradient(circle at 30% 30%, rgb(254, 249, 144), rgb(234, 229, 124), rgb(214, 209, 104));
  box-shadow: inset 0 0 .08rem rgba(255, 255, 255, 0.3), 0 0 .3rem rgba(254, 249, 144, 0.6), 0 0 .6rem rgba(254, 249, 144, 0.3);
}

.control-button--mute.control-button--active .control-button__led {
  background: radial-gradient(circle at 30% 30%, rgb(233, 59, 78), rgb(213, 39, 58), rgb(193, 19, 38));
  box-shadow: inset 0 0 .08rem rgba(255, 255, 255, 0.3), 0 0 .3rem rgba(233, 59, 78, 0.6), 0 0 .6rem rgba(233, 59, 78, 0.3);
}

// ==========================================================================
// DB LEGEND BLOCK
// ==========================================================================
.db-legend {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  font-family: Arial, Helvetica, sans-serif;
  height: 6.85rem;
  margin-bottom: 0.84rem;

  // Modifiers for positioning
  &--left {
    margin-right: 0.15rem;

    .db-legend__mark {
      text-align: right;
    }
  }

  &--right {
    margin-left: 0.15rem;

    .db-legend__mark {
      text-align: left;
    }
  }

  &__mark {
    font-size: 0.5rem;
    color: #e6ebf0;
    opacity: 0.6;
    font-weight: 600;
  }
}

// ==========================================================================
// EQ SECTION BLOCK
// ==========================================================================
.eq-section {

  &__bands {
    height: 100%;
    display: flex;
    align-items: center;
    flex-direction: row;
    gap: .28rem;
    justify-content: flex-end;
  }

  &__band {
    position: relative;
    width: .55rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-self: center;
    gap: .25rem;
  }

  &__frequency {
    font-family: Arial, Helvetica, sans-serif;
    font-size: .55rem;
    color: #e6ebf0;
    opacity: .6;

    /* Match the gap between ticks and track */
    text-align: center;
    position: relative;
    z-index: 1;
    /* Ensure frequency text is below slider */
  }

  &__ticks {
    position: relative;
    height: 6.38rem;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.85rem;

    &.align-left {
      align-items: flex-start;

    }

    &.align-right {
      align-items: flex-end;

    }
  }

  &__tick {
    width: .2rem;
    height: 0.0625rem;
    background: rgba(255, 255, 255, .35);

  border-radius: 999px; /* sentinel rounded pill */

    /* Target first, middle (6th), and last ticks to be slightly bolder */
    &:first-child,
    &:nth-child(6),
    &:last-child {
      width: .25rem;
      height: 0.125rem;
      background: rgba(255, 255, 255, .4);
    }
  }
}

// ==========================================================================
// EQ SLIDER BLOCK
// ==========================================================================
.eq-slider {
  &__container {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    position: relative;
    z-index: 2;
    height: 7rem;
    touch-action: none;
    -ms-touch-action: none;
    user-select: none;
    -webkit-user-drag: none;
    /* Ensure slider is above frequency text */
  }

  &__track {
    position: relative;
    width: .35rem;
    height: 100%;
    background:
      /* Narrower lighter center - shadows dominate more internal space */
      radial-gradient(ellipse at center, #1a1d20 0%, #12151a 25%, #0a0d12 60%, #050609 100%);

    /* More pronounced pill shape for cylindrical look */
    border-radius: .175rem;

    /* Very subtle outer highlight to suggest machined edge */
    border: 0.03125rem solid rgba(255, 255, 255, 0.06);

    box-shadow:
      /* Outer glow for cut edge definition */
      0 0 0 0.03125rem rgba(255, 255, 255, 0.03),
      /* Strong dark edge shadow all around - sharper */
      inset 0 0 0 0.0625rem rgba(0, 0, 0, 0.9),
      /* Sharp top shadow for depth - reduced blur */
      inset 0 0.0625rem 0.0625rem rgba(0, 0, 0, 0.95),
      /* Sharp bottom shadow - reduced blur */
      inset 0 -0.03125rem 0.0625rem rgba(0, 0, 0, 0.7),
      /* Sharp left edge shadow - tighter blur */
      inset 0.03125rem 0 0.03125rem rgba(0, 0, 0, 0.95),
      /* Sharp right edge shadow - tighter blur */
      inset -0.03125rem 0 0.03125rem rgba(0, 0, 0, 0.95),
      /* Overall recessed shadow - sharper but lighter */
      inset 0 0 0.09375rem rgba(0, 0, 0, 0.7);

    display: flex;
    align-items: center;
    justify-content: center;

    /* Top highlight edge like in the reference image */
    &::before {
      content: '';
      position: absolute;
      top: 0.03125rem;
      left: 0.09375rem;
      right: 0.09375rem;
      height: 0.03125rem;
      background: linear-gradient(90deg,
          rgba(255, 255, 255, 0.03),
          rgba(255, 255, 255, 0.08) 50%,
          rgba(255, 255, 255, 0.03));
      border-radius: 0.03125rem;
    }

    /* Bottom subtle highlight for cylindrical form */
    &::after {
      content: '';
      position: absolute;
      bottom: 0.03125rem;
      left: 0.125rem;
      right: 0.125rem;
      height: 0.03125rem;
      background: linear-gradient(90deg,
          transparent,
          rgba(255, 255, 255, 0.02) 50%,
          transparent);
      border-radius: 0.03125rem;
    }
  }

  /* Style the range input */
  &__input {
    position: absolute;
    width: 7.8rem;
    height: .35rem;
    transform: rotate(-90deg);
    transform-origin: center;
    background: transparent;
    cursor: pointer;

    /* Hide default appearance */
    -webkit-appearance: none;
    appearance: none;

    /* Track styling */
    &::-webkit-slider-track,
    &::-moz-range-track {
      background: transparent;
      border: none;
      height: .35rem;
    }

    /* Thumb styling - more like reference image */
    &::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 1.5rem;
      height: 1rem;
      border: 0.0312rem solid rgba(0, 0, 0, 0.55);
      border-radius: 0.25rem;
      box-shadow:
        /* Enhanced 3D shadows for depth */
        0 0.1875rem 0.375rem rgba(0, 0, 0, 0.4),
        0 0.0625rem 0.125rem rgba(0, 0, 0, 0.6),
        0 0.0625rem 0 rgba(150, 150, 150, 0.35),
        inset 0 0 0 0.0625rem rgba(255, 255, 255, 0.15),
        inset 0 -0.0625rem 0.125rem rgba(0, 0, 0, 0.35),
        inset 0 0.5rem 0.625rem rgba(255, 255, 255, 0.25);
      background:
        linear-gradient(to right,
          transparent calc(50% - 0.03125rem),
          rgba(0, 0, 0, 0.45) calc(50% - 0.03125rem) calc(50% + 0.03125rem),
          transparent calc(50% + 0.03125rem)),
        linear-gradient(to right, #8d949b, #a9b0b7 25%, #cfd4d9 55%, #a9b0b7 85%, #8d949b),
        linear-gradient(to bottom, rgba(255, 255, 255, 0.85), transparent 8% 92%, rgba(0, 0, 0, 0.25));

      clip-path: polygon(6% 0, 94% 0, 100% 6%, 100% 94%, 94% 100%, 6% 100%, 0 94%, 0 6%);
    }

    /* Focus states */
    &:focus {
      outline: none;
    }

    &:focus::-webkit-slider-thumb {
      box-shadow: inset 0 0.125rem 0.25rem rgba(255, 255, 255, .4),
        inset 0 -0.0625rem 0.125rem rgba(0, 0, 0, .4),
        0 0.125rem 0.25rem rgba(0, 0, 0, .5),
        0 0 .5rem rgba(100, 150, 255, .4);
    }

    &:focus::-moz-range-thumb {
      box-shadow: inset 0 0.125rem 0.25rem rgba(255, 255, 255, .4),
        inset 0 -0.0625rem 0.125rem rgba(0, 0, 0, .4),
        0 0.125rem 0.25rem rgba(0, 0, 0, .5),
        0 0 .5rem rgba(100, 150, 255, .4);
    }
  }
}
